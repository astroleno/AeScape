<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç²¾ç¡®è¿‡æ¸¡æµ‹è¯• - å¤©æ™¯ AeScape</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #74b9ff 0%, #0984e3 50%, #00cec9 100%);
      color: white;
      min-height: 100vh;
    }
    
    .background-interface {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1;
      pointer-events: none;
    }
    
    .background-content {
      text-align: center;
      font-size: 48px;
      font-weight: bold;
    }

    .test-container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
    }

    .test-header {
      text-align: center;
      margin-bottom: 40px;
    }

    .test-title {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 10px;
    }

    .test-section {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      padding: 30px;
      margin: 30px 0;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .video-demo {
      position: relative;
      width: 100%;
      height: 400px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      margin: 20px 0;
    }

    .controls {
      text-align: center;
      margin: 20px 0;
    }

    button {
      background: rgba(255, 255, 255, 0.2);
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.3);
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      margin: 0 8px;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }

    button:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
    }

    .status {
      text-align: center;
      margin: 20px 0;
      padding: 15px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      font-weight: 500;
    }

    .progress-bar {
      width: 100%;
      height: 20px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 10px;
      overflow: hidden;
      margin: 20px 0;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1);
      transition: width 0.1s ease;
      position: relative;
    }

    .progress-markers {
      position: relative;
      height: 20px;
      margin-top: 10px;
    }

    .marker {
      position: absolute;
      width: 2px;
      height: 20px;
      background: rgba(255, 255, 255, 0.8);
      top: -10px;
    }

    .marker-label {
      position: absolute;
      top: 15px;
      left: -20px;
      font-size: 12px;
      white-space: nowrap;
    }

    .timeline {
      display: flex;
      justify-content: space-between;
      margin: 10px 0;
      font-size: 14px;
    }

    .phase-info {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin: 20px 0;
    }

    .phase {
      background: rgba(0, 0, 0, 0.2);
      padding: 15px;
      border-radius: 8px;
      text-align: center;
    }

    .phase-title {
      font-weight: 600;
      margin-bottom: 8px;
    }

    .phase-desc {
      font-size: 14px;
      opacity: 0.8;
    }

    .phase.active {
      background: rgba(76, 175, 80, 0.3);
      border: 1px solid rgba(76, 175, 80, 0.5);
    }
  </style>
</head>
<body>
  <!-- èƒŒæ™¯ç•Œé¢å±‚ -->
  <div class="background-interface">
    <div class="background-content">
      <div style="font-size: 72px; margin-bottom: 20px;">ğŸŒ¤ï¸</div>
      <div>å¤©æ™¯ AeScape</div>
      <div style="font-size: 24px; margin-top: 20px; opacity: 0.8;">è§†é¢‘æ’­æ”¾ç»“æŸåçš„ä¸»ç•Œé¢</div>
    </div>
  </div>
  
  <!-- å¼€å¹•è§†é¢‘å±‚ -->
  <div class="intro-video-container" id="intro-video-container">
    <video class="intro-video" id="intro-video" muted playsinline>
      <source src="../video/M01522_2s_2K.webm" type="video/webm">
    </video>
  </div>

  <div class="test-container">
    <div class="test-header">
      <h1 class="test-title">ğŸ¬ ç²¾ç¡®è¿‡æ¸¡æ•ˆæœæµ‹è¯•</h1>
      <p>æµ‹è¯•åŸºäºè§†é¢‘æ—¶é•¿çš„ç²¾ç¡®è¿‡æ¸¡æ§åˆ¶</p>
    </div>

    <div class="test-section">
      <h2>ğŸ“Š è¿‡æ¸¡é˜¶æ®µ</h2>
      <div class="phase-info">
        <div class="phase" id="phase1">
          <div class="phase-title">é˜¶æ®µ 1</div>
          <div class="phase-desc">0-50%: çº¯é»‘èƒŒæ™¯</div>
        </div>
        <div class="phase" id="phase2">
          <div class="phase-title">é˜¶æ®µ 2</div>
          <div class="phase-desc">50-67%: Tabå‡ºç°</div>
        </div>
        <div class="phase" id="phase3">
          <div class="phase-title">é˜¶æ®µ 3</div>
          <div class="phase-desc">67-100%: æ·¡å‡º</div>
        </div>
      </div>
    </div>

    <div class="test-section">
      <h2>ğŸ® è§†é¢‘æ¼”ç¤º</h2>
      <div class="video-demo">
        <p style="text-align: center; margin: 20px 0; font-size: 18px;">
          ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹æ’­æ”¾ç²¾ç¡®è¿‡æ¸¡åŠ¨ç”»
        </p>
      </div>
      
      <div class="progress-bar">
        <div class="progress-fill" id="progress-fill"></div>
      </div>
      
      <div class="progress-markers">
        <div class="marker" style="left: 50%;">
          <div class="marker-label">50%</div>
        </div>
        <div class="marker" style="left: 66.67%;">
          <div class="marker-label">67%</div>
        </div>
      </div>
      
      <div class="timeline">
        <span>0s</span>
        <span id="current-time">0s</span>
        <span id="total-time">0s</span>
      </div>
      
      <div class="status" id="status">
        çŠ¶æ€: å‡†å¤‡å°±ç»ª
      </div>
      
      <div class="controls">
        <button onclick="playVideo()">æ’­æ”¾åŠ¨ç”»</button>
        <button onclick="stopVideo()">åœæ­¢åŠ¨ç”»</button>
        <button onclick="resetVideo()">é‡ç½®åŠ¨ç”»</button>
      </div>
    </div>

    <div class="test-section">
      <h2>ğŸ”§ æŠ€æœ¯å®ç°</h2>
      <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 8px; font-family: monospace; font-size: 14px;">
        <code>
// ç²¾ç¡®çš„è¿‡æ¸¡æ§åˆ¶é€»è¾‘<br>
if (progress < 0.5) {<br>
&nbsp;&nbsp;// å‰1/2æ—¶é—´ï¼šèƒŒæ™¯ä¿æŒçº¯é»‘<br>
&nbsp;&nbsp;opacity = 1;<br>
&nbsp;&nbsp;background = #000;<br>
} else if (progress >= 0.5 && progress < 2/3) {<br>
&nbsp;&nbsp;// 1/2åˆ°2/3æ—¶é—´ï¼štabé€æ¸å‡ºç°<br>
&nbsp;&nbsp;opacity = 1;<br>
&nbsp;&nbsp;background = transparent;<br>
} else if (progress >= 2/3) {<br>
&nbsp;&nbsp;// æœ€å1/3æ—¶é—´ï¼šä»100%å˜åˆ°0<br>
&nbsp;&nbsp;opacity = 1 - fadeProgress;<br>
}
        </code>
      </div>
    </div>
  </div>

  <script src="../js/video-intro.js"></script>
  <script>
    let videoAnimation = null;
    let currentPhase = 0;

    function updateStatus(message) {
      document.getElementById('status').textContent = `çŠ¶æ€: ${message}`;
    }

    function updateProgress(currentTime, duration) {
      if (duration > 0) {
        const progress = (currentTime / duration) * 100;
        document.getElementById('progress-fill').style.width = progress + '%';
        document.getElementById('current-time').textContent = currentTime.toFixed(2) + 's';
        document.getElementById('total-time').textContent = duration.toFixed(2) + 's';
        
        // æ›´æ–°é˜¶æ®µæŒ‡ç¤ºå™¨
        updatePhaseIndicator(progress);
      }
    }

    function updatePhaseIndicator(progress) {
      const phases = document.querySelectorAll('.phase');
      phases.forEach((phase, index) => {
        phase.classList.remove('active');
      });
      
      if (progress < 50) {
        phases[0].classList.add('active');
        currentPhase = 1;
      } else if (progress >= 50 && progress < 66.67) {
        phases[1].classList.add('active');
        currentPhase = 2;
      } else {
        phases[2].classList.add('active');
        currentPhase = 3;
      }
    }

    function playVideo() {
      // ç¡®ä¿è§†é¢‘åŠ¨ç”»æ­£ç¡®åˆå§‹åŒ–
      if (!videoAnimation) {
        videoAnimation = new VideoIntroAnimation();
      }
      
      // é‡ç½®è§†é¢‘çŠ¶æ€
      const videoContainer = document.getElementById('intro-video-container');
      const video = document.getElementById('intro-video');
      
      if (videoContainer && video) {
        videoContainer.style.display = 'flex';
        videoContainer.style.opacity = 1;
        videoContainer.classList.remove('video-ready', 'fade-out');
        video.currentTime = 0;
      }
      
      videoAnimation.play();
      updateStatus('å¼€å§‹æ’­æ”¾è§†é¢‘åŠ¨ç”»');
    }

    function stopVideo() {
      if (videoAnimation) {
        videoAnimation.stop();
        updateStatus('åœæ­¢è§†é¢‘åŠ¨ç”»');
      }
    }

    function resetVideo() {
      if (videoAnimation) {
        videoAnimation.stop();
        setTimeout(() => {
          playVideo();
          updateStatus('é‡ç½®å¹¶é‡æ–°æ’­æ”¾');
        }, 100);
      }
    }

    // ç›‘å¬è§†é¢‘è¿›åº¦
    document.addEventListener('DOMContentLoaded', () => {
      const video = document.getElementById('intro-video');
      
      if (video) {
        video.addEventListener('timeupdate', () => {
          updateProgress(video.currentTime, video.duration);
        });
        
        video.addEventListener('loadedmetadata', () => {
          updateProgress(0, video.duration);
          updateStatus('è§†é¢‘å…ƒæ•°æ®åŠ è½½å®Œæˆ');
        });
        
        video.addEventListener('canplay', () => {
          updateStatus('è§†é¢‘å¯ä»¥æ’­æ”¾');
        });
        
        video.addEventListener('ended', () => {
          updateStatus('è§†é¢‘æ’­æ”¾ç»“æŸ');
        });
        
        video.addEventListener('error', (e) => {
          updateStatus('è§†é¢‘åŠ è½½é”™è¯¯: ' + e.message);
        });
      }
    });

    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
    window.addEventListener('load', () => {
      updateStatus('é¡µé¢åŠ è½½å®Œæˆï¼Œç‚¹å‡»"æ’­æ”¾åŠ¨ç”»"æŒ‰é’®å¼€å§‹æµ‹è¯•');
    });
  </script>
</body>
</html>