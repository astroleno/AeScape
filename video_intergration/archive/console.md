background.js:22 Weather Background Service initializing...
background.js:497 AeScape extension updated
background.js:56 Loaded stored data: Object
background.js:240 Updating weather data using Current Weather API for: Shanghai
background.js:298 Weather data updated successfully using Current Weather API
background.js:453 Periodic weather updates enabled (aligned to quarter-hour)
background.js:36 Weather Background Service initialized
ErrorHandler.js:197 [AeScape] ç»Ÿä¸€é”™è¯¯å¤„ç†å™¨å·²åˆå§‹åŒ–
PerformanceMonitor.js:156 [AeScape Performance] é¡µé¢æ€§èƒ½æŒ‡æ ‡: Object
PerformanceMonitor.js:39 [AeScape] æ€§èƒ½ç›‘æ§å·²å¯åŠ¨
PerformanceMonitor.js:277 [AeScape] æ€§èƒ½ç›‘æ§å™¨å·²åˆå§‹åŒ–
ConfigManager.js:371 [AeScape] é…ç½®ç®¡ç†å™¨å·²åˆå§‹åŒ–
ConfigManager.js:80 [AeScape Config] é…ç½®ç®¡ç†å™¨åˆå§‹åŒ–å®Œæˆ
newtab.js:36 AeScape NewTab initializing...
newtab.js:75 [AeScape] åˆå§‹åŒ–ä¼˜åŒ–æ¨¡å—...
newtab.js:80 [AeScape] é”™è¯¯å¤„ç†å™¨å·²åˆå§‹åŒ–
PerformanceMonitor.js:156 [AeScape Performance] é¡µé¢æ€§èƒ½æŒ‡æ ‡: Object
PerformanceMonitor.js:39 [AeScape] æ€§èƒ½ç›‘æ§å·²å¯åŠ¨
newtab.js:86 [AeScape] æ€§èƒ½ç›‘æ§å™¨å·²åˆå§‹åŒ–
ConfigManager.js:80 [AeScape Config] é…ç½®ç®¡ç†å™¨åˆå§‹åŒ–å®Œæˆ
ConfigManager.js:80 [AeScape Config] é…ç½®ç®¡ç†å™¨åˆå§‹åŒ–å®Œæˆ
newtab.js:93 [AeScape] é…ç½®ç®¡ç†å™¨å·²åˆå§‹åŒ–
VideoResourceManager.js:43 [VideoResourceManager] è§†é¢‘èµ„æºç®¡ç†å™¨åˆå§‹åŒ–
newtab.js:102 [AeScape] è§†é¢‘èµ„æºç®¡ç†å™¨å·²åˆå§‹åŒ–
SmartThemeAdapter.js:80 [SmartThemeAdapter] æ™ºèƒ½ä¸»é¢˜é€‚é…å™¨åˆå§‹åŒ–
newtab.js:112 [AeScape] æ™ºèƒ½ä¸»é¢˜é€‚é…å™¨å·²åˆå§‹åŒ–
newtab.js:115 [AeScape] æ‰€æœ‰ä¼˜åŒ–æ¨¡å—åˆå§‹åŒ–å®Œæˆ
newtab.js:885 Initializing video module...
weather-video-mapper.js:166 WeatherVideoMapper: åˆå§‹åŒ–å®Œæˆ
VideoStreamOptimizer.js:42 [VideoStreamOptimizer] è§†é¢‘æµä¼˜åŒ–å™¨åˆå§‹åŒ– Object
VideoWeatherManager.js:55 VideoWeatherManager: åˆå§‹åŒ–å®Œæˆ
VideoIntroAnimation.js:126 VideoIntroAnimation: åŒå±‚è§†é¢‘ç»“æ„åˆ›å»ºå®Œæˆ
VideoIntroAnimation.js:63 VideoIntroAnimation: åˆå§‹åŒ–å®Œæˆ
VideoWeatherManager.js:91 VideoWeatherManager: ç®¡ç†å™¨åˆå§‹åŒ–å®Œæˆ
weather-video-mapper.js:166 WeatherVideoMapper: åˆå§‹åŒ–å®Œæˆ
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: clear, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/cloudy_4.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: clear, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/cloudy_4.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: clear, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/cloudy_9.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: clear, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/cloudy_5.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: clear, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/cloudy_7.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: clear, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/cloudy_20.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: clear, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/cloudy_16.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: clear, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/cloudy_22.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: clear, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/cloudy_8.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: clear, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/cloudy_16.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: clear, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/cloudy_9.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: cloudy, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/cloudy_5.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: cloudy, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/cloudy_5.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: cloudy, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/cloudy_17.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: cloudy, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/cloudy_16.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: cloudy, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/cloudy_18.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: cloudy, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/cloudy_20.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: cloudy, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/Windy_1.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: cloudy, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/cloudy_10.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: cloudy, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/cloudy_19.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: cloudy, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/cloudy_3.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: cloudy, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/cloudy_10.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: rain, å¼ºåº¦: medium, è§†é¢‘: video/tab/bv/bottomview_2.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: rain, å¼ºåº¦: medium, è§†é¢‘: video/tab/r/rain_3.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: rain, å¼ºåº¦: medium, è§†é¢‘: video/tab/r/rain_1.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: rain, å¼ºåº¦: medium, è§†é¢‘: video/tab/r/rain_9.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: rain, å¼ºåº¦: medium, è§†é¢‘: video/tab/r/rain_2.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: rain, å¼ºåº¦: medium, è§†é¢‘: video/tab/r/rain_4.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: rain, å¼ºåº¦: medium, è§†é¢‘: video/tab/r/rain_9.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: rain, å¼ºåº¦: medium, è§†é¢‘: video/tab/r/rain_2.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: rain, å¼ºåº¦: medium, è§†é¢‘: video/tab/r/rain_9.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: rain, å¼ºåº¦: medium, è§†é¢‘: video/tab/r/rain_12.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: rain, å¼ºåº¦: medium, è§†é¢‘: video/tab/g/glass_4.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: snow, å¼ºåº¦: medium, è§†é¢‘: video/tab/s/snow_9.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: snow, å¼ºåº¦: medium, è§†é¢‘: video/tab/s/snow_2.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: snow, å¼ºåº¦: medium, è§†é¢‘: video/tab/s/snow_5.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: snow, å¼ºåº¦: medium, è§†é¢‘: video/tab/s/snow_9.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: snow, å¼ºåº¦: medium, è§†é¢‘: video/tab/s/snow_5.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: snow, å¼ºåº¦: medium, è§†é¢‘: video/tab/s/snow_5.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: snow, å¼ºåº¦: medium, è§†é¢‘: video/tab/s/snow_8.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: snow, å¼ºåº¦: medium, è§†é¢‘: video/tab/s/snow_9.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: snow, å¼ºåº¦: medium, è§†é¢‘: video/tab/s/snow_9.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: snow, å¼ºåº¦: medium, è§†é¢‘: video/tab/s/snow_9.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: snow, å¼ºåº¦: medium, è§†é¢‘: video/tab/s/snow_9.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: fog, å¼ºåº¦: medium, è§†é¢‘: video/tab/f/foggy_2.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: fog, å¼ºåº¦: medium, è§†é¢‘: video/tab/f/foggy_3.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: fog, å¼ºåº¦: medium, è§†é¢‘: video/tab/f/foggy_2.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: fog, å¼ºåº¦: medium, è§†é¢‘: video/tab/f/foggy_2.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: fog, å¼ºåº¦: medium, è§†é¢‘: video/tab/f/foggy_1.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: fog, å¼ºåº¦: medium, è§†é¢‘: video/tab/f/foggy_2.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: fog, å¼ºåº¦: medium, è§†é¢‘: video/tab/f/foggy_2.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: fog, å¼ºåº¦: medium, è§†é¢‘: video/tab/f/foggy_2.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: fog, å¼ºåº¦: medium, è§†é¢‘: video/tab/f/foggy_3.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: fog, å¼ºåº¦: medium, è§†é¢‘: video/tab/f/foggy_3.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: fog, å¼ºåº¦: medium, è§†é¢‘: video/tab/f/foggy_2.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: thunderstorm, å¼ºåº¦: medium, è§†é¢‘: video/tab/t/thunder_4.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: thunderstorm, å¼ºåº¦: medium, è§†é¢‘: video/tab/t/thunder_2.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: thunderstorm, å¼ºåº¦: medium, è§†é¢‘: video/tab/t/thunder_1.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: thunderstorm, å¼ºåº¦: medium, è§†é¢‘: video/tab/t/thunder_3.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: thunderstorm, å¼ºåº¦: medium, è§†é¢‘: video/tab/t/thunder_4.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: thunderstorm, å¼ºåº¦: medium, è§†é¢‘: video/tab/t/thunder_1.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: thunderstorm, å¼ºåº¦: medium, è§†é¢‘: video/tab/t/thunder_1.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: thunderstorm, å¼ºåº¦: medium, è§†é¢‘: video/tab/t/thunder_2.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: thunderstorm, å¼ºåº¦: medium, è§†é¢‘: video/tab/t/thunder_1.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: thunderstorm, å¼ºåº¦: medium, è§†é¢‘: video/tab/t/thunder_1.webm
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: thunderstorm, å¼ºåº¦: medium, è§†é¢‘: video/tab/t/thunder_2.webm
AnimationCardSystem.js:11 AnimationCardSystem: åˆå§‹åŒ–å®Œæˆ
WeatherTriggerManager.js:13 WeatherTriggerManager: åˆå§‹åŒ–å®Œæˆ
VideoTriggerManager.js:30 VideoTriggerManager: åˆå§‹åŒ–å®Œæˆ Object
VideoTriggerManager.js:47 VideoTriggerManager: åˆå§‹åŒ–çŠ¶æ€ Object
newtab.js:916 Video trigger manager initialized successfully
newtab.js:946 Video settings loaded: Object
newtab.js:1041 Checking special video triggers...
newtab.js:1078 No special trigger: too_soon
newtab.js:925 Video module initialized successfully
WeatherTriggerManager.js:25 WeatherTriggerManager: æ£€æŸ¥å¤©æ°”å˜åŒ– Object
WeatherTriggerManager.js:37 WeatherTriggerManager: å¤©æ°”å˜åŒ–è§¦å‘æˆåŠŸ
newtab.js:63 AeScape NewTab initialized successfully
Warning: Donâ€™t paste code into the DevTools Console that you donâ€™t understand or havenâ€™t reviewed yourself. This could allow attackers to steal your identity or take control of your computer. Please type â€˜allow pastingâ€™ below and press Enter to allow pasting.
allow pasting
javascript
// 1. æ£€æŸ¥æ‰€æœ‰å…³é”®å¯¹è±¡æ˜¯å¦å­˜åœ¨
console.log('=== AeScape è§†é¢‘ç³»ç»Ÿæ£€æŸ¥ ===');
console.log('ä¸»å¯¹è±¡å­˜åœ¨:', !!window.aeScape);
console.log('è§†é¢‘ç®¡ç†å™¨:', !!window.aeScape?.videoManager);
console.log('æŠ½å¡ç³»ç»Ÿ:', !!window.aeScape?.cardSystem);
console.log('å¤©æ°”æ˜ å°„å™¨:', !!WeatherVideoMapper);
console.log('APIæ˜ å°„å™¨:', !!WeatherAPIMapper);
console.log('è§†é¢‘è§¦å‘å™¨:', !!VideoTriggerManager);
console.log('=========================');
VM53:1 Uncaught ReferenceError: javascript is not defined
    at <anonymous>:1:1
(anonymous) @ VM53:1
// 1. æ£€æŸ¥æ‰€æœ‰å…³é”®å¯¹è±¡æ˜¯å¦å­˜åœ¨
console.log('=== AeScape è§†é¢‘ç³»ç»Ÿæ£€æŸ¥ ===');
console.log('ä¸»å¯¹è±¡å­˜åœ¨:', !!window.aeScape);
console.log('è§†é¢‘ç®¡ç†å™¨:', !!window.aeScape?.videoManager);
console.log('æŠ½å¡ç³»ç»Ÿ:', !!window.aeScape?.cardSystem);
console.log('å¤©æ°”æ˜ å°„å™¨:', !!WeatherVideoMapper);
console.log('APIæ˜ å°„å™¨:', !!WeatherAPIMapper);
console.log('è§†é¢‘è§¦å‘å™¨:', !!VideoTriggerManager);
console.log('=========================');
VM57:2 === AeScape è§†é¢‘ç³»ç»Ÿæ£€æŸ¥ ===
VM57:3 ä¸»å¯¹è±¡å­˜åœ¨: true
VM57:4 è§†é¢‘ç®¡ç†å™¨: true
VM57:5 æŠ½å¡ç³»ç»Ÿ: true
VM57:6 å¤©æ°”æ˜ å°„å™¨: true
VM57:7 APIæ˜ å°„å™¨: true
VM57:8 è§†é¢‘è§¦å‘å™¨: true
VM57:9 =========================
undefined
// 2. æµ‹è¯•è§†é¢‘æ˜ å°„ç³»ç»Ÿ
async function testVideoMapping() {
  console.log('\nğŸ¯ æµ‹è¯•è§†é¢‘æ˜ å°„ç³»ç»Ÿ');
  
  const mapper = new WeatherVideoMapper();
  const weatherTypes = ['clear', 'cloudy', 'rain', 'snow', 'fog', 'thunderstorm'];
  
  weatherTypes.forEach(weather => {
    const video = mapper.getVideoForWeather(weather);
    console.log(`${weather}:`, {
      path: video.videoPath,
      hasAlpha: video.hasAlpha,
      blendMode: video.blendMode,
      description: video.description
    });
  });
  
  // æµ‹è¯•ç»Ÿè®¡ä¿¡æ¯
  console.log('æ˜ å°„ç»Ÿè®¡:', mapper.getMappingStats());
}
testVideoMapping();
VM61:3 
ğŸ¯ æµ‹è¯•è§†é¢‘æ˜ å°„ç³»ç»Ÿ
weather-video-mapper.js:166 WeatherVideoMapper: åˆå§‹åŒ–å®Œæˆ
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: clear, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/cloudy_21.webm
VM61:10 clear: {path: 'video/tab/c/cloudy_21.webm', hasAlpha: true, blendMode: 'lighten', description: 'æ™´å¤©æ•ˆæœï¼ˆcæ–‡ä»¶å¤¹å…¨éƒ¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: cloudy, å¼ºåº¦: medium, è§†é¢‘: video/tab/c/cloudy_3.webm
VM61:10 cloudy: {path: 'video/tab/c/cloudy_3.webm', hasAlpha: true, blendMode: 'lighten', description: 'å¤šäº‘æ•ˆæœï¼ˆcæ–‡ä»¶å¤¹å…¨éƒ¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: rain, å¼ºåº¦: medium, è§†é¢‘: video/tab/r/rain_8.webm
VM61:10 rain: {path: 'video/tab/r/rain_8.webm', hasAlpha: false, blendMode: 'screen', description: 'é›¨æ»´æ•ˆæœï¼ˆåŒ…å«æ‰€æœ‰é›¨å¤©è§†é¢‘ï¼Œscreenæ¨¡å¼ï¼‰'}
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: snow, å¼ºåº¦: medium, è§†é¢‘: video/tab/s/snow_4.webm
VM61:10 snow: {path: 'video/tab/s/snow_4.webm', hasAlpha: false, blendMode: 'screen', description: 'é›ªèŠ±æ•ˆæœï¼ˆscreenæ¨¡å¼ï¼‰'}
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: fog, å¼ºåº¦: medium, è§†é¢‘: video/tab/f/foggy_3.webm
VM61:10 fog: {path: 'video/tab/f/foggy_3.webm', hasAlpha: true, blendMode: 'lighten', description: 'é›¾å¤©æ•ˆæœï¼ˆfæ–‡ä»¶å¤¹ä¸“ç”¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
weather-video-mapper.js:260 WeatherVideoMapper: é€‰æ‹©è§†é¢‘ - å¤©æ°”: thunderstorm, å¼ºåº¦: medium, è§†é¢‘: video/tab/t/thunder_2.webm
VM61:10 thunderstorm: {path: 'video/tab/t/thunder_2.webm', hasAlpha: false, blendMode: 'overlay', description: 'é›·æš´æ•ˆæœï¼ˆtæ–‡ä»¶å¤¹ä¸“ç”¨è§†é¢‘ï¼Œoverlayæ¨¡å¼ï¼‰'}
VM61:19 æ˜ å°„ç»Ÿè®¡: {clear: {â€¦}, cloudy: {â€¦}, rain: {â€¦}, snow: {â€¦}, fog: {â€¦},Â â€¦}
PromiseÂ {<fulfilled>: undefined}
// 3. æµ‹è¯•æŠ½å¡ç³»ç»Ÿ
async function testCardSystem() {
  console.log('\nğŸ² æµ‹è¯•æŠ½å¡ç³»ç»Ÿ');
  
  const cardSystem = window.aeScape?.cardSystem || new AnimationCardSystem();
  const weatherTypes = ['clear', 'cloudy', 'rain', 'snow', 'fog', 'thunderstorm'];
  
  weatherTypes.forEach(weather => {
    console.log(`\n--- ${weather} æŠ½å¡æ±  ---`);
    const pool = cardSystem.getAnimationPool(weather);
    console.log(`æ± åç§°: ${pool?.name || 'æœªæ‰¾åˆ°'}`);
    console.log(`è§†é¢‘æ•°é‡: ${pool?.videos?.length || 0}`);
    
    if (pool?.videos?.length > 0) {
      // æŠ½5æ¬¡å¡
      for (let i = 1; i <= 5; i++) {
        const card = cardSystem.drawCard(weather);
        console.log(`ç¬¬${i}æ¬¡æŠ½å¡:`, {
          id: card.id,
          path: card.path,
          type: card.type,
          description: card.description
        });
      }
    }
  });
}
testCardSystem();
VM65:3 
ğŸ² æµ‹è¯•æŠ½å¡ç³»ç»Ÿ
VM65:9 
--- clear æŠ½å¡æ±  ---
VM65:11 æ± åç§°: æ™´å¤©åŠ¨ç”»æ± 
VM65:12 è§†é¢‘æ•°é‡: 8
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'clear', lastVideoId: undefined, consecutiveCount: 0, totalVideos: 8}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'clear', availableVideos: 8, totalWeight: 640}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'clear', videoId: 'clear_001', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'clear_001', type: 'normal', description: 'æ™´å¤©æ•ˆæœï¼ˆcæ–‡ä»¶å¤¹å…¨éƒ¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬1æ¬¡æŠ½å¡: {id: 'clear_001', path: 'video/tab/c/cloudy_4.webm', type: 'normal', description: 'æ™´å¤©æ•ˆæœï¼ˆcæ–‡ä»¶å¤¹å…¨éƒ¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'clear', lastVideoId: 'clear_001', consecutiveCount: 1, totalVideos: 8}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'clear', availableVideos: 8, totalWeight: 640}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'clear', videoId: 'clear_005', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'clear_005', type: 'normal', description: 'æ™´å¤©æ•ˆæœï¼ˆcæ–‡ä»¶å¤¹å…¨éƒ¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬2æ¬¡æŠ½å¡: {id: 'clear_005', path: 'video/tab/c/cloudy_20.webm', type: 'normal', description: 'æ™´å¤©æ•ˆæœï¼ˆcæ–‡ä»¶å¤¹å…¨éƒ¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'clear', lastVideoId: 'clear_005', consecutiveCount: 1, totalVideos: 8}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'clear', availableVideos: 8, totalWeight: 640}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'clear', videoId: 'clear_007', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'clear_007', type: 'normal', description: 'æ™´å¤©æ•ˆæœï¼ˆcæ–‡ä»¶å¤¹å…¨éƒ¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬3æ¬¡æŠ½å¡: {id: 'clear_007', path: 'video/tab/c/cloudy_22.webm', type: 'normal', description: 'æ™´å¤©æ•ˆæœï¼ˆcæ–‡ä»¶å¤¹å…¨éƒ¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'clear', lastVideoId: 'clear_007', consecutiveCount: 1, totalVideos: 8}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'clear', availableVideos: 8, totalWeight: 640}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'clear', videoId: 'clear_004', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'clear_004', type: 'normal', description: 'æ™´å¤©æ•ˆæœï¼ˆcæ–‡ä»¶å¤¹å…¨éƒ¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬4æ¬¡æŠ½å¡: {id: 'clear_004', path: 'video/tab/c/cloudy_7.webm', type: 'normal', description: 'æ™´å¤©æ•ˆæœï¼ˆcæ–‡ä»¶å¤¹å…¨éƒ¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'clear', lastVideoId: 'clear_004', consecutiveCount: 1, totalVideos: 8}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'clear', availableVideos: 8, totalWeight: 640}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'clear', videoId: 'clear_007', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'clear_007', type: 'normal', description: 'æ™´å¤©æ•ˆæœï¼ˆcæ–‡ä»¶å¤¹å…¨éƒ¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬5æ¬¡æŠ½å¡: {id: 'clear_007', path: 'video/tab/c/cloudy_22.webm', type: 'normal', description: 'æ™´å¤©æ•ˆæœï¼ˆcæ–‡ä»¶å¤¹å…¨éƒ¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
VM65:9 
--- cloudy æŠ½å¡æ±  ---
VM65:11 æ± åç§°: å¤šäº‘åŠ¨ç”»æ± 
VM65:12 è§†é¢‘æ•°é‡: 9
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'cloudy', lastVideoId: 'clear_007', consecutiveCount: 0, totalVideos: 9}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'cloudy', availableVideos: 9, totalWeight: 720}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'cloudy', videoId: 'cloudy_002', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'cloudy_002', type: 'normal', description: 'å¤šäº‘æ•ˆæœï¼ˆcæ–‡ä»¶å¤¹å…¨éƒ¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬1æ¬¡æŠ½å¡: {id: 'cloudy_002', path: 'video/tab/c/cloudy_17.webm', type: 'normal', description: 'å¤šäº‘æ•ˆæœï¼ˆcæ–‡ä»¶å¤¹å…¨éƒ¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'cloudy', lastVideoId: 'cloudy_002', consecutiveCount: 1, totalVideos: 9}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'cloudy', availableVideos: 9, totalWeight: 720}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'cloudy', videoId: 'cloudy_007', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'cloudy_007', type: 'normal', description: 'å¤šäº‘æ•ˆæœï¼ˆcæ–‡ä»¶å¤¹å…¨éƒ¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬2æ¬¡æŠ½å¡: {id: 'cloudy_007', path: 'video/tab/c/cloudy_10.webm', type: 'normal', description: 'å¤šäº‘æ•ˆæœï¼ˆcæ–‡ä»¶å¤¹å…¨éƒ¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'cloudy', lastVideoId: 'cloudy_007', consecutiveCount: 1, totalVideos: 9}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'cloudy', availableVideos: 9, totalWeight: 720}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'cloudy', videoId: 'cloudy_005', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'cloudy_005', type: 'normal', description: 'å¤šäº‘æ•ˆæœï¼ˆcæ–‡ä»¶å¤¹å…¨éƒ¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬3æ¬¡æŠ½å¡: {id: 'cloudy_005', path: 'video/tab/c/cloudy_20.webm', type: 'normal', description: 'å¤šäº‘æ•ˆæœï¼ˆcæ–‡ä»¶å¤¹å…¨éƒ¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'cloudy', lastVideoId: 'cloudy_005', consecutiveCount: 1, totalVideos: 9}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'cloudy', availableVideos: 9, totalWeight: 720}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'cloudy', videoId: 'cloudy_004', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'cloudy_004', type: 'normal', description: 'å¤šäº‘æ•ˆæœï¼ˆcæ–‡ä»¶å¤¹å…¨éƒ¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬4æ¬¡æŠ½å¡: {id: 'cloudy_004', path: 'video/tab/c/cloudy_18.webm', type: 'normal', description: 'å¤šäº‘æ•ˆæœï¼ˆcæ–‡ä»¶å¤¹å…¨éƒ¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'cloudy', lastVideoId: 'cloudy_004', consecutiveCount: 1, totalVideos: 9}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'cloudy', availableVideos: 9, totalWeight: 720}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'cloudy', videoId: 'cloudy_004', consecutiveCount: 2}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'cloudy_004', type: 'normal', description: 'å¤šäº‘æ•ˆæœï¼ˆcæ–‡ä»¶å¤¹å…¨éƒ¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬5æ¬¡æŠ½å¡: {id: 'cloudy_004', path: 'video/tab/c/cloudy_18.webm', type: 'normal', description: 'å¤šäº‘æ•ˆæœï¼ˆcæ–‡ä»¶å¤¹å…¨éƒ¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
VM65:9 
--- rain æŠ½å¡æ±  ---
VM65:11 æ± åç§°: é›¨å¤©åŠ¨ç”»æ± 
VM65:12 è§†é¢‘æ•°é‡: 7
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'rain', lastVideoId: 'cloudy_004', consecutiveCount: 0, totalVideos: 7}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'rain', availableVideos: 7, totalWeight: 560}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'rain', videoId: 'rain_005', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'rain_005', type: 'normal', description: 'é›¨æ»´æ•ˆæœï¼ˆåŒ…å«æ‰€æœ‰é›¨å¤©è§†é¢‘ï¼Œscreenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬1æ¬¡æŠ½å¡: {id: 'rain_005', path: 'video/tab/r/rain_4.webm', type: 'normal', description: 'é›¨æ»´æ•ˆæœï¼ˆåŒ…å«æ‰€æœ‰é›¨å¤©è§†é¢‘ï¼Œscreenæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'rain', lastVideoId: 'rain_005', consecutiveCount: 1, totalVideos: 7}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'rain', availableVideos: 7, totalWeight: 560}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'rain', videoId: 'rain_001', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'rain_001', type: 'normal', description: 'é›¨æ»´æ•ˆæœï¼ˆåŒ…å«æ‰€æœ‰é›¨å¤©è§†é¢‘ï¼Œscreenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬2æ¬¡æŠ½å¡: {id: 'rain_001', path: 'video/tab/r/rain_3.webm', type: 'normal', description: 'é›¨æ»´æ•ˆæœï¼ˆåŒ…å«æ‰€æœ‰é›¨å¤©è§†é¢‘ï¼Œscreenæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'rain', lastVideoId: 'rain_001', consecutiveCount: 1, totalVideos: 7}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'rain', availableVideos: 7, totalWeight: 560}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'rain', videoId: 'rain_005', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'rain_005', type: 'normal', description: 'é›¨æ»´æ•ˆæœï¼ˆåŒ…å«æ‰€æœ‰é›¨å¤©è§†é¢‘ï¼Œscreenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬3æ¬¡æŠ½å¡: {id: 'rain_005', path: 'video/tab/r/rain_4.webm', type: 'normal', description: 'é›¨æ»´æ•ˆæœï¼ˆåŒ…å«æ‰€æœ‰é›¨å¤©è§†é¢‘ï¼Œscreenæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'rain', lastVideoId: 'rain_005', consecutiveCount: 1, totalVideos: 7}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'rain', availableVideos: 7, totalWeight: 560}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'rain', videoId: 'rain_001', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'rain_001', type: 'normal', description: 'é›¨æ»´æ•ˆæœï¼ˆåŒ…å«æ‰€æœ‰é›¨å¤©è§†é¢‘ï¼Œscreenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬4æ¬¡æŠ½å¡: {id: 'rain_001', path: 'video/tab/r/rain_3.webm', type: 'normal', description: 'é›¨æ»´æ•ˆæœï¼ˆåŒ…å«æ‰€æœ‰é›¨å¤©è§†é¢‘ï¼Œscreenæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'rain', lastVideoId: 'rain_001', consecutiveCount: 1, totalVideos: 7}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'rain', availableVideos: 7, totalWeight: 560}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'rain', videoId: 'rain_004', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'rain_004', type: 'normal', description: 'é›¨æ»´æ•ˆæœï¼ˆåŒ…å«æ‰€æœ‰é›¨å¤©è§†é¢‘ï¼Œscreenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬5æ¬¡æŠ½å¡: {id: 'rain_004', path: 'video/tab/r/rain_2.webm', type: 'normal', description: 'é›¨æ»´æ•ˆæœï¼ˆåŒ…å«æ‰€æœ‰é›¨å¤©è§†é¢‘ï¼Œscreenæ¨¡å¼ï¼‰'}
VM65:9 
--- snow æŠ½å¡æ±  ---
VM65:11 æ± åç§°: é›ªå¤©åŠ¨ç”»æ± 
VM65:12 è§†é¢‘æ•°é‡: 4
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'snow', lastVideoId: 'rain_004', consecutiveCount: 0, totalVideos: 4}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'snow', availableVideos: 4, totalWeight: 320}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'snow', videoId: 'snow_004', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'snow_004', type: 'normal', description: 'é›ªèŠ±æ•ˆæœï¼ˆscreenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬1æ¬¡æŠ½å¡: {id: 'snow_004', path: 'video/tab/s/snow_8.webm', type: 'normal', description: 'é›ªèŠ±æ•ˆæœï¼ˆscreenæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'snow', lastVideoId: 'snow_004', consecutiveCount: 1, totalVideos: 4}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'snow', availableVideos: 4, totalWeight: 320}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'snow', videoId: 'snow_001', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'snow_001', type: 'normal', description: 'é›ªèŠ±æ•ˆæœï¼ˆscreenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬2æ¬¡æŠ½å¡: {id: 'snow_001', path: 'video/tab/s/snow_2.webm', type: 'normal', description: 'é›ªèŠ±æ•ˆæœï¼ˆscreenæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'snow', lastVideoId: 'snow_001', consecutiveCount: 1, totalVideos: 4}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'snow', availableVideos: 4, totalWeight: 320}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'snow', videoId: 'snow_003', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'snow_003', type: 'normal', description: 'é›ªèŠ±æ•ˆæœï¼ˆscreenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬3æ¬¡æŠ½å¡: {id: 'snow_003', path: 'video/tab/s/snow_9.webm', type: 'normal', description: 'é›ªèŠ±æ•ˆæœï¼ˆscreenæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'snow', lastVideoId: 'snow_003', consecutiveCount: 1, totalVideos: 4}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'snow', availableVideos: 4, totalWeight: 320}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'snow', videoId: 'snow_003', consecutiveCount: 2}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'snow_003', type: 'normal', description: 'é›ªèŠ±æ•ˆæœï¼ˆscreenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬4æ¬¡æŠ½å¡: {id: 'snow_003', path: 'video/tab/s/snow_9.webm', type: 'normal', description: 'é›ªèŠ±æ•ˆæœï¼ˆscreenæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'snow', lastVideoId: 'snow_003', consecutiveCount: 2, totalVideos: 4}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'snow', availableVideos: 4, totalWeight: 320}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'snow', videoId: 'snow_003', consecutiveCount: 3}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'snow_003', type: 'normal', description: 'é›ªèŠ±æ•ˆæœï¼ˆscreenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬5æ¬¡æŠ½å¡: {id: 'snow_003', path: 'video/tab/s/snow_9.webm', type: 'normal', description: 'é›ªèŠ±æ•ˆæœï¼ˆscreenæ¨¡å¼ï¼‰'}
VM65:9 
--- fog æŠ½å¡æ±  ---
VM65:11 æ± åç§°: é›¾å¤©åŠ¨ç”»æ± 
VM65:12 è§†é¢‘æ•°é‡: 3
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'fog', lastVideoId: 'snow_003', consecutiveCount: 0, totalVideos: 3}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'fog', availableVideos: 3, totalWeight: 240}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'fog', videoId: 'fog_002', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'fog_002', type: 'normal', description: 'é›¾å¤©æ•ˆæœï¼ˆfæ–‡ä»¶å¤¹ä¸“ç”¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬1æ¬¡æŠ½å¡: {id: 'fog_002', path: 'video/tab/f/foggy_2.webm', type: 'normal', description: 'é›¾å¤©æ•ˆæœï¼ˆfæ–‡ä»¶å¤¹ä¸“ç”¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'fog', lastVideoId: 'fog_002', consecutiveCount: 1, totalVideos: 3}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'fog', availableVideos: 3, totalWeight: 240}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'fog', videoId: 'fog_002', consecutiveCount: 2}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'fog_002', type: 'normal', description: 'é›¾å¤©æ•ˆæœï¼ˆfæ–‡ä»¶å¤¹ä¸“ç”¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬2æ¬¡æŠ½å¡: {id: 'fog_002', path: 'video/tab/f/foggy_2.webm', type: 'normal', description: 'é›¾å¤©æ•ˆæœï¼ˆfæ–‡ä»¶å¤¹ä¸“ç”¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'fog', lastVideoId: 'fog_002', consecutiveCount: 2, totalVideos: 3}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'fog', availableVideos: 3, totalWeight: 240}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'fog', videoId: 'fog_003', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'fog_003', type: 'normal', description: 'é›¾å¤©æ•ˆæœï¼ˆfæ–‡ä»¶å¤¹ä¸“ç”¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬3æ¬¡æŠ½å¡: {id: 'fog_003', path: 'video/tab/f/foggy_1.webm', type: 'normal', description: 'é›¾å¤©æ•ˆæœï¼ˆfæ–‡ä»¶å¤¹ä¸“ç”¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'fog', lastVideoId: 'fog_003', consecutiveCount: 1, totalVideos: 3}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'fog', availableVideos: 3, totalWeight: 240}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'fog', videoId: 'fog_002', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'fog_002', type: 'normal', description: 'é›¾å¤©æ•ˆæœï¼ˆfæ–‡ä»¶å¤¹ä¸“ç”¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬4æ¬¡æŠ½å¡: {id: 'fog_002', path: 'video/tab/f/foggy_2.webm', type: 'normal', description: 'é›¾å¤©æ•ˆæœï¼ˆfæ–‡ä»¶å¤¹ä¸“ç”¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'fog', lastVideoId: 'fog_002', consecutiveCount: 1, totalVideos: 3}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'fog', availableVideos: 3, totalWeight: 240}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'fog', videoId: 'fog_001', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'fog_001', type: 'normal', description: 'é›¾å¤©æ•ˆæœï¼ˆfæ–‡ä»¶å¤¹ä¸“ç”¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬5æ¬¡æŠ½å¡: {id: 'fog_001', path: 'video/tab/f/foggy_3.webm', type: 'normal', description: 'é›¾å¤©æ•ˆæœï¼ˆfæ–‡ä»¶å¤¹ä¸“ç”¨è§†é¢‘ï¼Œlightenæ¨¡å¼ï¼‰'}
VM65:9 
--- thunderstorm æŠ½å¡æ±  ---
VM65:11 æ± åç§°: é›·æš´åŠ¨ç”»æ± 
VM65:12 è§†é¢‘æ•°é‡: 4
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'thunderstorm', lastVideoId: 'fog_001', consecutiveCount: 0, totalVideos: 4}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'thunderstorm', availableVideos: 4, totalWeight: 320}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'thunderstorm', videoId: 'thunderstorm_001', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'thunderstorm_001', type: 'normal', description: 'é›·æš´æ•ˆæœï¼ˆtæ–‡ä»¶å¤¹ä¸“ç”¨è§†é¢‘ï¼Œoverlayæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬1æ¬¡æŠ½å¡: {id: 'thunderstorm_001', path: 'video/tab/t/thunder_2.webm', type: 'normal', description: 'é›·æš´æ•ˆæœï¼ˆtæ–‡ä»¶å¤¹ä¸“ç”¨è§†é¢‘ï¼Œoverlayæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'thunderstorm', lastVideoId: 'thunderstorm_001', consecutiveCount: 1, totalVideos: 4}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'thunderstorm', availableVideos: 4, totalWeight: 320}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'thunderstorm', videoId: 'thunderstorm_002', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'thunderstorm_002', type: 'normal', description: 'é›·æš´æ•ˆæœï¼ˆtæ–‡ä»¶å¤¹ä¸“ç”¨è§†é¢‘ï¼Œoverlayæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬2æ¬¡æŠ½å¡: {id: 'thunderstorm_002', path: 'video/tab/t/thunder_1.webm', type: 'normal', description: 'é›·æš´æ•ˆæœï¼ˆtæ–‡ä»¶å¤¹ä¸“ç”¨è§†é¢‘ï¼Œoverlayæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'thunderstorm', lastVideoId: 'thunderstorm_002', consecutiveCount: 1, totalVideos: 4}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'thunderstorm', availableVideos: 4, totalWeight: 320}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'thunderstorm', videoId: 'thunderstorm_003', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'thunderstorm_003', type: 'normal', description: 'é›·æš´æ•ˆæœï¼ˆtæ–‡ä»¶å¤¹ä¸“ç”¨è§†é¢‘ï¼Œoverlayæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬3æ¬¡æŠ½å¡: {id: 'thunderstorm_003', path: 'video/tab/t/thunder_3.webm', type: 'normal', description: 'é›·æš´æ•ˆæœï¼ˆtæ–‡ä»¶å¤¹ä¸“ç”¨è§†é¢‘ï¼Œoverlayæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'thunderstorm', lastVideoId: 'thunderstorm_003', consecutiveCount: 1, totalVideos: 4}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'thunderstorm', availableVideos: 4, totalWeight: 320}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'thunderstorm', videoId: 'thunderstorm_004', consecutiveCount: 1}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'thunderstorm_004', type: 'normal', description: 'é›·æš´æ•ˆæœï¼ˆtæ–‡ä»¶å¤¹ä¸“ç”¨è§†é¢‘ï¼Œoverlayæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬4æ¬¡æŠ½å¡: {id: 'thunderstorm_004', path: 'video/tab/t/thunder_4.webm', type: 'normal', description: 'é›·æš´æ•ˆæœï¼ˆtæ–‡ä»¶å¤¹ä¸“ç”¨è§†é¢‘ï¼Œoverlayæ¨¡å¼ï¼‰'}
AnimationCardSystem.js:197 AnimationCardSystem: è¿‡æ»¤è§†é¢‘ {weatherType: 'thunderstorm', lastVideoId: 'thunderstorm_004', consecutiveCount: 1, totalVideos: 4}
AnimationCardSystem.js:232 AnimationCardSystem: å¼€å§‹æŠ½å¡ {weatherType: 'thunderstorm', availableVideos: 4, totalWeight: 320}
AnimationCardSystem.js:280 AnimationCardSystem: æ›´æ–°æ’­æ”¾å†å² {weatherType: 'thunderstorm', videoId: 'thunderstorm_004', consecutiveCount: 2}
AnimationCardSystem.js:244 AnimationCardSystem: æŠ½ä¸­è§†é¢‘ {id: 'thunderstorm_004', type: 'normal', description: 'é›·æš´æ•ˆæœï¼ˆtæ–‡ä»¶å¤¹ä¸“ç”¨è§†é¢‘ï¼Œoverlayæ¨¡å¼ï¼‰'}
VM65:18 ç¬¬5æ¬¡æŠ½å¡: {id: 'thunderstorm_004', path: 'video/tab/t/thunder_4.webm', type: 'normal', description: 'é›·æš´æ•ˆæœï¼ˆtæ–‡ä»¶å¤¹ä¸“ç”¨è§†é¢‘ï¼Œoverlayæ¨¡å¼ï¼‰'}
PromiseÂ {<fulfilled>: undefined}
// 4. å®Œæ•´è§†é¢‘è½®æ’­æµ‹è¯•ï¼ˆæ…ç”¨ï¼šä¼šæ’­æ”¾æ‰€æœ‰57ä¸ªè§†é¢‘ï¼‰
async function fullVideoPlaytest() {
  console.log('\nğŸ“¹ å¼€å§‹å®Œæ•´è§†é¢‘è½®æ’­æµ‹è¯•');
  
  if (!window.aeScape?.videoManager) {
    console.error('è§†é¢‘ç®¡ç†å™¨æœªåˆå§‹åŒ–ï¼');
    return;
  }
  
  const videoManager = window.aeScape.videoManager;
  const cardSystem = window.aeScape.cardSystem;
  const weatherTypes = ['clear', 'cloudy', 'rain', 'snow', 'fog', 'thunderstorm'];
  
  let totalVideos = 0;
  let playedVideos = 0;
  let errors = 0;
  
  // ç»Ÿè®¡æ€»è§†é¢‘æ•°
  weatherTypes.forEach(weather => {
    const pool = cardSystem.getAnimationPool(weather);
    totalVideos += pool?.videos?.length || 0;
  });
  
  console.log(`æ€»å…±éœ€è¦æµ‹è¯• ${totalVideos} ä¸ªè§†é¢‘`);
  
  for (const weather of weatherTypes) {
    console.log(`\nğŸŒ¤ï¸ æµ‹è¯• ${weather} ç±»å‹è§†é¢‘`);
    const pool = cardSystem.getAnimationPool(weather);
    
    if (!pool?.videos?.length) {
      console.warn(`${weather} æ²¡æœ‰è§†é¢‘`);
      continue;
    }
    
    for (const video of pool.videos) {
      try {
        console.log(`æ’­æ”¾: ${video.path} (${video.description})`);
        
        // æ’­æ”¾è§†é¢‘
        await videoManager.playWeatherVideo(weather, {
          intensity: 'medium',
          useGlass: false,
          useBottomView: false
        });
        
        playedVideos++;
        console.log(`âœ… æ’­æ”¾æˆåŠŸ [${playedVideos}/${totalVideos}]`);
        
        // ç­‰å¾…è§†é¢‘æ’­æ”¾å®Œæˆï¼ˆ2ç§’ï¼‰
        await new Promise(resolve => setTimeout(resolve, 2000));
        
      } catch (error) {
        errors++;
        console.error(`âŒ æ’­æ”¾å¤±è´¥: ${video.path}`, error);
      }
    }
  }
  
  console.log(`\nğŸ¬ è½®æ’­æµ‹è¯•å®Œæˆï¼`);
  console.log(`æˆåŠŸ: ${playedVideos}, å¤±è´¥: ${errors}, æ€»è®¡: ${totalVideos}`);
  console.log(`æˆåŠŸç‡: ${((playedVideos / totalVideos) * 100).toFixed(1)}%`);
}

// è­¦å‘Šç”¨æˆ·
console.log('âš ï¸  è½®æ’­æµ‹è¯•å°†æ’­æ”¾æ‰€æœ‰57ä¸ªè§†é¢‘ï¼Œéœ€è¦çº¦5åˆ†é’Ÿ');
console.log('âš ï¸  ç¡®è®¤è¦å¼€å§‹æµ‹è¯•è¯·è¿è¡Œ: fullVideoPlaytest()');
VM69:65 âš ï¸  è½®æ’­æµ‹è¯•å°†æ’­æ”¾æ‰€æœ‰57ä¸ªè§†é¢‘ï¼Œéœ€è¦çº¦5åˆ†é’Ÿ
VM69:66 âš ï¸  ç¡®è®¤è¦å¼€å§‹æµ‹è¯•è¯·è¿è¡Œ: fullVideoPlaytest()
undefined
fullVideoPlaytest
async Æ’ fullVideoPlaytest() {
  console.log('\nğŸ“¹ å¼€å§‹å®Œæ•´è§†é¢‘è½®æ’­æµ‹è¯•');
  
  if (!window.aeScape?.videoManager) {
    console.error('è§†é¢‘ç®¡ç†å™¨æœªåˆå§‹åŒ–ï¼');
    return;
  }
  
  const videoManager = window.aeScape.videoManageâ€¦
// 7. æ€§èƒ½ç›‘æ§å’Œç»Ÿè®¡
async function performanceMonitor() {
  console.log('\nâš¡ æ€§èƒ½ç›‘æ§');
  
  const getMemoryInfo = () => {
    if (performance.memory) {
      const memory = performance.memory;
      return {
        used: Math.round(memory.usedJSHeapSize / 1024 / 1024) + 'MB',
        total: Math.round(memory.totalJSHeapSize / 1024 / 1024) + 'MB',
        limit: Math.round(memory.jsHeapSizeLimit / 1024 / 1024) + 'MB'
      };
    }
    return 'Memory APIä¸å¯ç”¨';
  };
  
  const initialMemory = getMemoryInfo();
  console.log('åˆå§‹å†…å­˜:', initialMemory);
  
  // ç›‘æ§è§†é¢‘æ’­æ”¾æ€§èƒ½
  if (window.aeScape?.videoManager) {
    console.log('è§†é¢‘ç®¡ç†å™¨çŠ¶æ€:', window.aeScape.videoManager.getStatus());
  }
  
  // æ€§èƒ½è§‚å¯Ÿå™¨
  if ('PerformanceObserver' in window) {
    const observer = new PerformanceObserver((list) => {
      list.getEntries().forEach((entry) => {
        if (entry.name.includes('video') || entry.name.includes('webm')) {
          console.log('èµ„æºåŠ è½½:', entry.name, 'è€—æ—¶:', entry.duration + 'ms');
        }
      });
    });
    
    observer.observe({entryTypes: ['resource']});
    
    setTimeout(() => {
      observer.disconnect();
      console.log('åœæ­¢æ€§èƒ½ç›‘æ§');
      console.log('å½“å‰å†…å­˜:', getMemoryInfo());
    }, 30000);
  }
}

performanceMonitor();
VM98:3 
âš¡ æ€§èƒ½ç›‘æ§
VM98:18 åˆå§‹å†…å­˜: {used: '3MB', total: '5MB', limit: '4096MB'}
VM98:22 è§†é¢‘ç®¡ç†å™¨çŠ¶æ€: {isInitialized: true, isPlaying: false, currentWeather: null, currentVideo: null, performance: {â€¦},Â â€¦}
PromiseÂ {<fulfilled>: undefined}[[Prototype]]: Promise[[PromiseState]]: "fulfilled"[[PromiseResult]]: undefined
// 8. æµ‹è¯•ç‰¹æ®Šè§¦å‘å™¨
async function testSpecialTriggers() {
  console.log('\nğŸ§ª æµ‹è¯•ç‰¹æ®Šè§¦å‘å™¨');
  
  if (!window.aeScape?.videoTriggerManager) {
    console.error('è§†é¢‘è§¦å‘ç®¡ç†å™¨æœªåˆå§‹åŒ–ï¼');
    return;
  }
  
  const triggerManager = window.aeScape.videoTriggerManager;
  
  // è·å–å½“å‰çŠ¶æ€
  console.log('å½“å‰çŠ¶æ€:', triggerManager.getStatus());
  
  // æ¨¡æ‹Ÿå„ç§è§¦å‘æ¡ä»¶
  const testScenarios = [
    { type: 'welcome', description: 'æ¨¡æ‹Ÿé¦–æ¬¡å®‰è£…' },
    { type: 'settings', description: 'æ¨¡æ‹Ÿè®¾ç½®å®Œæˆ' },
    { type: 'restart', description: 'æ¨¡æ‹Ÿæµè§ˆå™¨é‡å¯' },
    { type: 'update', description: 'æ¨¡æ‹Ÿæ‰©å±•æ›´æ–°' }
  ];
  
  for (const scenario of testScenarios) {
    console.log(`\næµ‹è¯•: ${scenario.description}`);
    
    // è®¾ç½®ç›¸åº”çš„å­˜å‚¨æ ‡è®°
    switch (scenario.type) {
      case 'welcome':
        await chrome.storage.local.set({ shouldShowWelcomeVideo: true });
        break;
      case 'settings':
        await chrome.storage.local.set({ 
          settingsChanged: true, 
          settingsChangeTime: Date.now() 
        });
        break;
      case 'restart':
        triggerManager.state.isFirstTabThisSession = true;
        triggerManager.state.hasTriggeredThisSession = false;
        break;
      case 'update':
        await chrome.storage.local.set({ 
          recentUpdate: true, 
          updateTime: Date.now() 
        });
        break;
    }
    
    // æ£€æŸ¥æ˜¯å¦åº”è¯¥è§¦å‘
    const result = await triggerManager.checkShouldTriggerVideo();
    console.log('è§¦å‘ç»“æœ:', result);
    
    if (result.shouldTrigger) {
      console.log(`âœ… ${scenario.description} è§¦å‘æˆåŠŸ`);
    } else {
      console.log(`âŒ ${scenario.description} æœªè§¦å‘: ${result.reason}`);
    }
  }
  
  // è·å–è§¦å‘å†å²
  const history = await triggerManager.getTriggerHistory(5);
  console.log('\nè§¦å‘å†å²:', history);
}

console.log('ğŸ§ª æµ‹è¯•ç‰¹æ®Šè§¦å‘å™¨: testSpecialTriggers()');
VM102:65 ğŸ§ª æµ‹è¯•ç‰¹æ®Šè§¦å‘å™¨: testSpecialTriggers()
undefined
background.js:240 Updating weather data using Current Weather API for: Shanghai
background.js:298 Weather data updated successfully using Current Weather API
// ä¸€é”®è¿è¡ŒåŸºç¡€æµ‹è¯•
async function quickTest() {
  console.log('ğŸš€ å¼€å§‹å¿«é€Ÿæµ‹è¯•...');
  
  // åŸºç¡€æ£€æŸ¥
  console.log('1/4 åŸºç¡€æ£€æŸ¥...');
  testVideoMapping();
  
  // æŠ½å¡æµ‹è¯•
  console.log('2/4 æŠ½å¡æµ‹è¯•...');
  testCardSystem();
  
  // æ’­æ”¾æµ‹è¯•ï¼ˆåªæµ‹è¯•é›¨å¤©ï¼‰
  console.log('3/4 æ’­æ”¾æµ‹è¯•...');
  await testWeatherType('rain', 1);
  
  // æ–‡ä»¶æ£€æŸ¥
  console.log('4/4 æ–‡ä»¶æ£€æŸ¥...');
  // await checkVideoFiles(); // å¯é€‰ï¼šæ£€æŸ¥æ‰€æœ‰æ–‡ä»¶
  
  console.log('âœ… å¿«é€Ÿæµ‹è¯•å®Œæˆï¼');
}

console.log('');
console.log('ğŸ® === AeScape è§†é¢‘æµ‹è¯•æ§åˆ¶å° ===');
console.log('quickTest()              - è¿è¡Œå¿«é€Ÿæµ‹è¯•');
console.log('testWeatherType("rain")  - æµ‹è¯•æŒ‡å®šå¤©æ°”');
console.log('fullVideoPlaytest()      - å®Œæ•´è½®æ’­æµ‹è¯•');
console.log('checkVideoFiles()        - æ£€æŸ¥æ‰€æœ‰æ–‡ä»¶');
console.log('testSpecialTriggers()    - æµ‹è¯•ç‰¹æ®Šè§¦å‘');
console.log('performanceMonitor()     - æ€§èƒ½ç›‘æ§');
console.log('================================');
VM106:24 
VM106:25 ğŸ® === AeScape è§†é¢‘æµ‹è¯•æ§åˆ¶å° ===
VM106:26 quickTest()              - è¿è¡Œå¿«é€Ÿæµ‹è¯•
VM106:27 testWeatherType("rain")  - æµ‹è¯•æŒ‡å®šå¤©æ°”
VM106:28 fullVideoPlaytest()      - å®Œæ•´è½®æ’­æµ‹è¯•
VM106:29 checkVideoFiles()        - æ£€æŸ¥æ‰€æœ‰æ–‡ä»¶
VM106:30 testSpecialTriggers()    - æµ‹è¯•ç‰¹æ®Šè§¦å‘
VM106:31 performanceMonitor()     - æ€§èƒ½ç›‘æ§
VM106:32 ================================
undefined
VM98:39 åœæ­¢æ€§èƒ½ç›‘æ§
VM98:40 å½“å‰å†…å­˜: {used: '4MB', total: '5MB', limit: '4096MB'}
quickTest
async Æ’ quickTest() {
  console.log('ğŸš€ å¼€å§‹å¿«é€Ÿæµ‹è¯•...');
  
  // åŸºç¡€æ£€æŸ¥
  console.log('1/4 åŸºç¡€æ£€æŸ¥...');
  testVideoMapping();
  
  // æŠ½å¡æµ‹è¯•
  console.log('2/4 æŠ½å¡æµ‹è¯•...');
  testCardSystem();
  
  // æ’­æ”¾æµ‹è¯•ï¼ˆåªæµ‹è¯•é›¨å¤©ï¼‰
  consâ€¦
