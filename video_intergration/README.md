# AeScape - 天气驱动沉浸式体验 (整合版)

## 🎯 项目概述

AeScape 整合版是一个创新的Chrome扩展，融合了智能天气显示与沉浸式视频动画系统。当用户打开新标签页时，系统会根据当前天气状态智能触发相应的动画效果，营造"天井仪式"般的沉浸式视觉体验。

## ✨ 核心特性

### 🌤️ 智能天气系统
- **实时天气数据** - 基于OpenWeatherMap API的全球天气服务
- **动态主题切换** - 根据天气自动调整页面主题色彩
- **智能位置服务** - 自动定位或手动搜索全球城市
- **悬浮天气球** - 在所有网页显示简洁的天气信息

### 🎬 沉浸式视频动画
- **天气驱动触发** - 天气状态改变时自动播放动画
- **智能抽卡系统** - 避免重复，增加新鲜感
- **双层视频播放** - 核心层 + 光晕层的视觉效果
- **混合模式优化** - 解决云层黑边问题
- **1.5秒沉浸体验** - 短时但强烈的视觉冲击

### 🎨 视觉效果
- **iOS18设计语言** - 参考苹果天气应用的视觉设计
- **毛玻璃效果** - 现代化的界面设计
- **动态背景** - 根据天气条件变化的渐变背景
- **粒子效果** - 增强沉浸感的视觉元素

### ⚙️ 个性化设置
- **视频动画控制** - 开启/关闭视频动画功能
- **自动触发设置** - 控制动画的自动播放
- **频率调节** - 调整动画播放频率
- **主题自定义** - 个性化界面主题

## 🚀 快速安装

### 1. 下载插件
```bash
# 克隆项目
git clone https://github.com/your-username/AeScape.git
cd AeScape/video_intergration
```

### 2. 安装到Chrome
1. 打开Chrome浏览器，进入 `chrome://extensions/`
2. 开启"开发者模式"
3. 点击"加载已解压的扩展程序"
4. 选择 `video_intergration` 文件夹

### 3. 配置API Key
1. 访问 [OpenWeatherMap](https://openweathermap.org/current)
2. 注册免费账户（完全免费，无需订阅）
3. 获取API Key
4. 打开新标签页，点击右上角"设置"
5. 在API配置中输入您的API Key
6. 点击"测试API Key"验证配置

## 📋 支持的天气类型

| 天气类型 | 视频数量 | 混合模式 | 描述 |
|---------|---------|---------|------|
| 晴天 (clear) | 8个 | lighten | 与多云共用云层视频 |
| 多云 (cloudy) | 8个 | lighten | 云层扑面效果 |
| 雾天 (fog) | 8个 | lighten | 与多云共用云层视频 |
| 雨天 (rain) | 8个 | screen | 雨滴扑面效果 |
| 雪天 (snow) | 9个 | screen | 雪花飘落效果 |
| 雷暴 (thunderstorm) | 1个 | overlay | 闪电特效 |

## 🎮 使用方法

### 基础功能
1. **新标签页体验** - 打开新标签页即可看到天气信息和动态背景
2. **悬浮天气球** - 在所有网页右上角显示天气信息
3. **扩展弹窗** - 点击扩展图标查看天气概况

### 视频动画功能
1. **自动触发** - 天气变化时自动播放动画
2. **手动控制** - 在设置中开启/关闭视频动画
3. **频率调节** - 调整动画播放频率（1-10级）
4. **个性化设置** - 根据个人喜好调整动画效果

### 设置面板
- **API配置** - 设置OpenWeatherMap API Key
- **位置设置** - 手动设置城市或自动获取位置
- **个性化** - 控制动态背景、粒子效果等
- **视频动画** - 控制视频动画的播放设置

## 🏗️ 技术架构

```
video_intergration/
├── manifest.json              # 扩展配置文件
├── newtab.html               # 新标签页主页
├── popup.html                # 扩展弹窗页面
├── js/
│   ├── newtab.js             # 新标签页主逻辑
│   ├── popup.js              # 弹窗逻辑
│   ├── background.js         # 后台服务
│   ├── content.js            # 内容脚本
│   ├── VideoIntroAnimation.js    # 视频动画核心
│   ├── VideoWeatherManager.js    # 天气视频管理
│   ├── AnimationCardSystem.js    # 抽卡算法
│   ├── WeatherTriggerManager.js  # 天气触发管理
│   └── weather-video-mapper.js   # 视频映射
├── css/
│   ├── newtab.css            # 新标签页样式
│   ├── content.css           # 内容脚本样式
│   └── video-intro.css       # 视频动画样式
├── video/                    # 视频资源
│   └── tab/                  # 天气视频文件
└── icon/                     # 扩展图标
```

## ⚙️ 配置选项

### 视频动画设置
```json
{
  "videoSettings": {
    "enabled": true,           // 启用视频动画
    "autoTrigger": true,       // 自动触发
    "frequency": 5             // 播放频率 (1-10)
  }
}
```

### 触发规则
- **天气变化触发** - 天气状态改变时自动播放
- **持续时间触发** - 长时间同一天气时偶尔触发
- **权重随机选择** - 避免重复，增加新鲜感

## 🧪 测试功能

### 手动测试视频动画
1. 打开新标签页
2. 点击设置按钮
3. 在"视频动画"部分调整设置
4. 刷新页面或切换天气查看效果

### 调试模式
- 打开浏览器开发者工具
- 查看控制台日志了解动画触发情况
- 检查网络请求确认视频加载状态

## 🔧 故障排除

### 常见问题
1. **视频不播放** - 检查视频文件路径和网络连接
2. **API错误** - 验证OpenWeatherMap API Key
3. **动画卡顿** - 降低播放频率或关闭增强效果
4. **位置获取失败** - 检查浏览器位置权限

### 性能优化
- 视频文件已优化为WebM格式
- 使用硬件加速播放
- 智能预加载策略
- 内存管理优化

## 📊 性能指标

- **视频加载时间** - 平均 < 500ms
- **动画播放时长** - 精确1.5秒
- **内存占用** - 优化后 < 50MB
- **CPU使用率** - 播放时 < 15%

## 🔮 未来规划

### 短期目标
- [ ] 更多天气类型支持
- [ ] 用户行为分析
- [ ] 动画效果优化
- [ ] 性能监控系统

### 中期目标
- [ ] 个性化推荐
- [ ] 社交分享功能
- [ ] 移动端适配
- [ ] 云端同步系统

### 长期愿景
- [ ] AI驱动的动画生成
- [ ] 社区内容平台
- [ ] 商业化探索
- [ ] 跨平台支持

## 🤝 贡献指南

1. Fork 项目
2. 创建功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 创建 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 🙏 致谢

- [OpenWeatherMap](https://openweathermap.org/) - 提供专业的天气API服务
- Chrome扩展开发者社区 - 技术支持和灵感
- 所有贡献者和用户 - 反馈和建议

---

**AeScape** - 让每一次打开新标签页都成为一次与自然的邂逅 🌟

*让数字生活多一份宁静与美感*
