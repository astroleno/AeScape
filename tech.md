åœ¨ Chrome æ’ä»¶é‡Œæ€ä¹ˆç”¨ï¼ˆè¦ç‚¹ï¼‰

MV3 å»ºè®®ï¼šæŠŠ three ä¸ jsm æ¨¡å—ä¸‹è½½å¹¶æ‰“åŒ…åˆ°æ‰©å±•ç›®å½•ï¼ŒæŠŠ import map æ”¹æˆæœ¬åœ°è·¯å¾„ï¼ˆä¾‹å¦‚ï¼š"three": "/vendor/three/build/three.module.js"ï¼Œ"three/addons/": "/vendor/three/examples/jsm/"ï¼‰ã€‚

ç”¨è¿™ä»½ index.html ä½œä¸ºï¼š

chrome_url_overrides.newtabï¼ˆæ–°æ ‡ç­¾é¡µï¼‰æˆ–

chrome://extensions -> â€œåŠ è½½å·²è§£å‹çš„æ‰©å±•â€åä½œä¸ºæ‰©å±•é¡µ/å¼¹å‡ºé¡µã€‚

ä»åå°/Service Worker æ‹¿åˆ°å¤©æ°”ã€å¤ªé˜³è§’ã€AQI åï¼Œchrome.tabs.sendMessage æˆ– chrome.runtime.sendMessage åˆ°è¿™ä¸ªé¡µé¢ï¼Œç»“æ„ç”¨ä¸Šé¢çš„ applyWeatherState(state) å³å¯ã€‚

å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥æŠŠ æ‰©å±•çš„ manifest.jsonï¼ˆMV3ï¼‰ æ¨¡æ¿ä¹Ÿç»™ä¸Šï¼Œå¹¶æŠŠ import map æ”¹æˆæœ¬åœ°è·¯å¾„ç‰ˆæœ¬ï¼ˆæ— å¤–ç½‘ä¾èµ–ï¼‰ã€‚ä½ åªè¦æŠŠä½ çš„å¤©æ°”æ•°æ®ç®¡é“æ¥è¿› applyWeatherState()ï¼Œæ‰“å¼€æ–° Tab å°±ä¼šæ˜¾ç¤ºå½“åœ°å½“æ—¶çš„çœŸå®å¤©æ°” ğŸ¯